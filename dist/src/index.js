!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("nexusdk",[],e):"object"==typeof exports?exports.nexusdk=e():t.nexusdk=e()}(global,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n.w={},n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r={};function o(t,e,n){let r=t;const o=l(e||"");for(let t=0;t<o.length;t+=1){let e=o[t];""!==e&&("]"===e[e.length-1]&&(e=e.substr(0,e.length-1),e=parseInt(e,10)),t!==o.length-1?("object"!=typeof r[e]&&(r[e]={}),r=r[e]):r[e]=n)}return t}function s(t,e){return"object"==typeof t&&t.hasOwnProperty(e)}function i(t,e,n){let r=t;const o=l(e||"");for(let t=0;t<o.length;t+=1){let e=o[t];if(""!==e){if("]"===e[e.length-1]&&(e=e.substr(0,e.length-1),e=parseInt(e,10)),!s(r,e))return n;r=r[e]}}return r}function u(t,e,n,r){return null===e||void 0===e||""===e?e=n:e+=`.${n}`,o(t,e,r)}function c(t,e,n,r){let o=t;return(e||"").split(".").forEach((t,e,s)=>{""!==t&&e!==s.length-1?(void 0===o[n]&&(o[n]={[t]:{}}),o=o[n][t]):(void 0===o[n]&&(o[n]={[t]:{}}),o[n][t]=r)}),t}function a(t,e,n,r,o){return null===e||void 0===e||""===e?e=r:e+=`.${r}`,c(t,e,n,o)}function l(t){if(t instanceof Array)return t;let e=!1,n=0,r=!1,o=!1;const s=t.length,i=[];for(let u=0;u<s+1;u+=1){const c=t[u];if(e&&!o?"]"===c&&(o=!0):"."===c?r=!0:"["===c&&(r=!0,e=!0),r||u===s){let s=t.substr(n,u-n-(o?1:0));if(e){const t=parseInt(s,10);isNaN(t)||(s=t)}i.push(s),n=u+1,r=!1,o&&(e=!1),o=!1}}return i}function f(t){return t.reduce((t,e,n)=>"[object Number]"===toString.call(e)?`${t}[${e}]`:t+(n>0?".":"")+e,"")}function h(t,e,n={}){const r=l(e);let o=t;for(let t=0;t<r.length;t+=1){const e=r[t];if(!s(o,e)){const s=t===r.length-1?null:r[t+1];null===s?o[e]=n:"[object Number]"===toString.call(s)?o[e]=[]:o[e]={}}o=o[e]}return o}n.d(r,"set",function(){return o}),n.d(r,"has",function(){return s}),n.d(r,"get",function(){return i}),n.d(r,"setKey",function(){return u}),n.d(r,"setWithSubkey",function(){return c}),n.d(r,"setKeyWithSubkey",function(){return a}),n.d(r,"getObjectPath",function(){return l}),n.d(r,"getStringPathForArray",function(){return f}),n.d(r,"assurePathExists",function(){return h}),n.d(e,"default",function(){return p}),n.d(e,"object",function(){return r});const d=1;class p{constructor({id:t,name:e}={}){this.errors=[],this.onInternalMessage=this.onInternalMessage.bind(this),this.onReceiveMessage=this.onReceiveMessage.bind(this),void 0!==global.process&&(this.communicationType=d,this.process=global.process,this.process.on("message",this.onReceiveMessage)),this.hook={id:t,name:e},this.callbacks={internal:this.onInternalMessage}}onInternalMessage(t){const{name:e,data:n}=t;"meta"===e&&(this.meta=n)}sendMessage(t){this.communicationType===d&&this.process.send({meta:this.meta,hook:this.hook,time:(new Date).toISOString(),message:t})}onReceiveMessage(t){const{type:e,data:n}=t,r=this.callbacks[e];r&&r(n,{type:e})}on(t,e){"internal"===t&&console.error("The internal callback is reserved"),this.callbacks[t]=e}}}])});